(()=>{"use strict";const e=function(){this.length=0,this.ships=[],this.lost=()=>{for(let e=0;e<5;e++)if(0==this.ships[e].Sunk())return 0;return 1},this.full=()=>5==this.length,this.add=e=>{this.ships.push(e),this.length+=1}},t=function(e,t,l,r){this.type=e,this.length=t,this.cells=l,this.color=r,this.Sunk=()=>0==this.length?1:0,this.belongs=e=>{console.log(e,this.cells);for(let t=0;t<this.length;t++)if(e[0]==this.cells[t][0]&e[1]==this.cells[t][1])return t;return-1},this.delete=e=>{this.cells.splice(e,1),this.length+=-1}},l=(e,t,l,r,i)=>function(e,t,l,r){let i=t,n=10*(e[0]-1)+(e[1]-1);if(0==l){if(t>11-e[1])return 0;for(;i>0;){if(""!=r[n].style.backgroundColor)return 0;i+=-1,n+=1}}else{if(t>11-e[0])return 0;for(;i>0;){if(""!=r[n].style.backgroundColor)return 0;i+=-1,n+=10}}return 1}(e,t,l,r)?(console.log(1),function(e,t,l,r,i){let n=t,o=10*(e[0]-1)+(e[1]-1),s=[];if(0==l)for(;n>0;)r[o].style.backgroundColor=i,s.push([Math.floor(o/10)+1,o%10+1]),n+=-1,o+=1;else for(;n>0;)r[o].style.backgroundColor=i,s.push([Math.floor(o/10)+1,o%10+1]),n+=-1,o+=10;return s}(e,t,l,r,i)):-1;let r=[["Carrier",5,"orange"],["Battleship",4,"red"],["Cruiser",3,"Blue"],["Submarine",3,"green"],["Destroyer",2,"pink"]],i=document.querySelector("#computer"),n=new e;const o=()=>{for(let e=0;e<10;e++)for(let t=0;t<10;t++){let l=document.createElement("div");l.value=[e+1,t+1],i.appendChild(l)}!function(){for(;!n.full();){let e=Math.floor(100*Math.random()),o=i.children[e],s=n.length,h=Math.floor(2*Math.random()),c=l(o.value,r[s][1],h,i.children,r[s][2]);if(-1!=c){let e=new t(r[s][0],r[s][1],c,r[s][2]);n.add(e)}}for(let e=0;e<i.children.length;e++)i.children[e].style.backgroundColor="grey"}()};function s(){if("grey"==this.style.backgroundColor){let e=this.value;for(let t=0;t<5;t++)if(-1!=n.ships[t].belongs(e))return n.ships[t].delete(n.ships[t].belongs(e)),console.log(n.ships[t].color),void(this.style.backgroundColor=n.ships[t].color);this.style.backgroundColor="black"}}function h(){if(-1!=this.value){let e=this.value;for(let t=0;t<5;t++)if(-1!=d.ships[t].belongs(e))return d.ships[t].delete(d.ships[t].belongs(e)),console.log(d.ships[t].color),this.style.backgroundColor=d.ships[t].color,this.innerHTML="R",void(this.value=-1);this.style.backgroundColor="black",this.innerHTML="W",this.value=-1}}let c=[["Carrier",5,"orange"],["Battleship",4,"red"],["Cruiser",3,"Blue"],["Submarine",3,"green"],["Destroyer",2,"pink"]],u=document.querySelector("#user"),d=new e;function f(){if(d.full())o();else{let e=d.length,r=1,n=l(this.value,c[e][1],r,u.children,c[e][2]);if(-1!=n){let l=new t(c[e][0],c[e][1],n,c[e][2]);d.add(l)}if(d.full()){o();for(let e=0;e<u.children.length;e++)u.children[e].removeEventListener("click",f);(()=>{for(let e=0;e<i.children.length;e++)i.children[e].addEventListener("click",s)})(),(()=>{for(let e=0;e<u.children.length;e++)u.children[e].addEventListener("click",h)})()}}}(()=>{for(let e=0;e<10;e++)for(let t=0;t<10;t++){let l=document.createElement("div");l.value=[e+1,t+1],l.addEventListener("click",f),u.appendChild(l)}})()})();